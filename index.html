<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALAIN Profektus AI Assistant</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.5.1",
    "marked": "https://esm.sh/marked@^12.0.2",
    "dompurify": "https://esm.sh/dompurify@^3.0.8",
    "jspdf": "https://esm.sh/jspdf@2.5.1",
    "html2canvas": "https://esm.sh/html2canvas@1.4.1"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="app-container">
        <aside id="sidebar">
            <div id="sidebar-header">
                <button id="new-chat-btn" aria-label="Crear Nueva Propuesta" title="Crear una nueva propuesta">
                    <i class="fas fa-file-signature"></i> Crear Nueva Propuesta
                </button>
            </div>
            <!-- Fixed chats removed -->
            <div id="chat-search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="chat-search" placeholder="Buscar propuestas...">
            </div>
            <ul id="chat-history-list">
                <!-- Chat history items will be populated here -->
            </ul>
            <div id="sidebar-footer">
                <button id="theme-toggle" aria-label="Cambiar tema">
                    <i class="fas fa-adjust"></i> <!-- Icon will be set by JS -->
                </button>
            </div>
        </aside>

        <main id="main-content">
            <div id="logo-container">
                <img id="main-profektus-logo" src="https://i.imgur.com/H3Bl5Vs.png" alt="Profektus Logo">
            </div>
            <header id="main-header">
                <div id="header-top-row">
                    <div id="header-left-controls">
                        <button id="sidebar-toggle" aria-label="Alternar barra lateral" title="Alternar barra lateral">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                    <div id="header-title-group">
                        <h1 id="app-main-title-header">
                            <span class="full-title">ALAIN Profektus AI Assistant</span><span class="short-title">ALAIN</span>
                        </h1>
                    </div>
                    <div id="header-right-controls">
                        <button id="fullscreen-btn" title="Pantalla Completa" aria-label="Activar/desactivar pantalla completa">
                            <i class="fas fa-expand"></i>
                        </button>
                        <div id="share-container">
                            <button id="share-btn" title="Importar/Exportar conversaci贸n" aria-label="Importar/Exportar conversaci贸n" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-exchange-alt"></i><span class="btn-text"> Importar/Exportar</span>
                            </button>
                            <div id="share-dropdown">
                                <button id="export-chat-dropdown-btn" disabled><i class="fas fa-download"></i> Exportar Conversaci贸n</button>
                                <button id="import-chat-dropdown-btn"><i class="fas fa-upload"></i> Importar Conversaci贸n</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Function buttons container removed -->
                <span id="active-chat-session-title"></span>
            </header>
            <div id="chat-messages">
                <!-- Chat messages will be displayed here -->
            </div>
            <div id="chat-input-container">
                 <button id="attach-file-btn" aria-label="Adjuntar archivo" title="Adjuntar archivo">
                    <i class="fas fa-paperclip"></i>
                </button>
                <input type="file" id="file-input" hidden>
                <button id="dictate-btn" aria-label="Iniciar dictado por voz" title="Iniciar dictado por voz">
                    <i class="fas fa-microphone"></i>
                </button>
                <div id="chat-input-wrapper">
                    <div id="attachment-preview-container"></div>
                    <textarea id="chat-input" placeholder="Escribe para editar la propuesta..." aria-label="Entrada de mensaje"></textarea>
                </div>
                <button id="send-btn" aria-label="Enviar mensaje" title="Enviar mensaje">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </main>
    </div>
    
    <input type="file" id="import-chat-input" accept=".aic,.json" hidden>

    <div id="new-chat-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="new-chat-modal-title">
        <div class="modal-content modal-content-large">
            <button class="close-modal-btn" aria-label="Cerrar modal creaci贸n de propuesta" title="Cerrar">&times;</button>
            <h2 id="new-chat-modal-title">Nueva Propuesta</h2>
            <p class="modal-subtitle">Ingresa los datos para generar la estructura inicial.</p>
            
            <div class="modal-grid">
                <div class="modal-form-group">
                    <label for="client-name-input">Nombre del Cliente *</label>
                    <input type="text" id="client-name-input" placeholder="Ej: Nestl茅">
                </div>
                <div class="modal-form-group">
                    <label for="topic-input">Tema del Cliente *</label>
                    <input type="text" id="topic-input" placeholder="Ej: Liderazgo y Clima">
                </div>
            </div>

            <div class="modal-form-group">
                <label for="form-content-input">Contenidos del formulario enviado al cliente</label>
                <textarea id="form-content-input" rows="3" placeholder="Pega aqu铆 las respuestas del cliente o el resumen del formulario..."></textarea>
            </div>

            <div class="modal-form-group">
                <label for="additional-info-input">Informaci贸n Adicional</label>
                <textarea id="additional-info-input" rows="2" placeholder="Notas extra, contexto espec铆fico o requerimientos especiales..."></textarea>
            </div>

            <div class="modal-form-group">
                <label for="modal-file-input" class="file-upload-label">
                    <i class="fas fa-cloud-upload-alt"></i> Adjuntar documento de soporte (Opcional)
                </label>
                <input type="file" id="modal-file-input" class="modal-file-input">
                <div id="modal-file-preview"></div>
            </div>

            <button id="create-chat-confirm-btn" class="primary-btn full-width-btn">Generar Propuesta</button>
        </div>
    </div>

    <div id="delete-chat-confirm-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="delete-chat-modal-title">
        <div class="modal-content">
            <button class="close-modal-btn" aria-label="Cerrar modal confirmaci贸n de borrado" title="Cerrar">&times;</button>
            <h2 id="delete-chat-modal-title">Confirmar Borrado</h2>
            <p>驴Est谩s seguro de que quieres borrar la propuesta "<span id="chat-to-delete-title"></span>"?</p>
            <div class="modal-actions">
                <button id="cancel-delete-chat-btn" class="secondary-btn">Cancelar</button>
                <button id="confirm-delete-chat-btn" class="danger-btn">S铆, borrar</button>
            </div>
        </div>
    </div>

    <script type="module" src="index.tsx"></script>
<script type="module" src="/index.tsx"></script>
</body>
</html>